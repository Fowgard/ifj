.IFJcode18
DEFVAR GF@!result
DEFVAR GF@!tmp1
DEFVAR GF@!tmp2
DEFVAR GF@!tmp3

CREATEFRAME
DEFVAR TF@!0
DEFVAR TF@!1
DEFVAR TF@!2

MOVE TF@!0 string@ahoj
MOVE TF@!1 int@1
MOVE TF@!2 int@2
CALL $substr
WRITE TF@!retvar
JUMP $konec


LABEL $length

PUSHFRAME
DEFVAR LF@!retvar
STRLEN LF@!retvar LF@!0
POPFRAME
RETURN

LABEL $substr


PUSHFRAME

DEFVAR LF@!retvar
MOVE LF@!retvar nil@nil
DEFVAR LF@!length
CREATEFRAME
BREAK
DEFVAR TF@!0
MOVE TF@!0 LF@!0


CALL $length

MOVE LF@!length TF@!retvar
DEFVAR LF@!relation
LT LF@!relation LF@!length int@0
JUMPIFEQ $substr_end LF@!relation bool@true
EQ LF@!relation LF@!length int@0
JUMPIFEQ $substr_end LF@!relation bool@true
LT LF@!relation LF@!1 int@0
JUMPIFEQ $substr_end LF@!relation bool@true
GT LF@!relation LF@!1 LF@!length
JUMPIFEQ $substr_end LF@!relation bool@true
LT LF@!relation LF@!2 int@0
JUMPIFEQ $substr_end LF@!relation bool@true
MOVE LF@!retvar string@
EQ LF@!relation LF@!2 int@0
JUMPIFEQ $substr_end LF@!relation bool@true
DEFVAR LF@!n
MOVE LF@!n LF@!length
SUB LF@!n LF@!n LF@!1
GT LF@!relation LF@!2 LF@!n
JUMPIFEQ $n_is_max LF@!relation bool@true
JUMP $find_substr

LABEL $n_is_max
MOVE LF@!2 LF@!n
LABEL $find_substr
DEFVAR LF@!i
MOVE LF@!i LF@!1
DEFVAR LF@!symbol
DEFVAR LF@!cond
LABEL $substr_loop
GETCHAR LF@!symbol LF@!0 LF@!i
CONCAT LF@!retvar LF@!retvar LF@!symbol
ADD LF@!i LF@!i int@1
SUB LF@!2 LF@!2 int@1
GT LF@!cond LF@!2 int@0
JUMPIFEQ $substr_loop LF@!cond bool@true
LABEL $substr_end
POPFRAME
RETURN



LABEL $konec
